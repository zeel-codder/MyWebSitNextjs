{"ast":null,"code":"function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nvar DataBase = require('server/database/DataBaseOperationsBlogInfo');\n\nvar bcrypt = require(\"bcryptjs\");\n\nvar jwt = require('jsonwebtoken');\n\nexport default function handler(_x, _x2) {\n  return _handler.apply(this, arguments);\n}\n\nfunction _handler() {\n  _handler = _asyncToGenerator(function* (req, res) {\n    // your server-side functionality\n    // console.log('strat');\n    yield DataBase.ONConnections(); // console.log(req.body)\n\n    req.body.password = yield bcrypt.hash(req.body.password, 12);\n    var ans = yield DataBase.AddNewBlog(req.body, DataBase.UserInfo); // console.log(ans,1223);\n\n    yield DataBase.OffConnections();\n\n    if (ans === null) {\n      res.status(404).end(JSON.stringify({\n        message: \"User Not Add\"\n      }));\n    }\n\n    var token = req.body.token || jwt.sign(ans.toJSON(), process.env.key, {\n      expiresIn: \"1h\"\n    }); // await DataBase.OffDatabase();\n\n    res.end(JSON.stringify({\n      result: ans,\n      token\n    })); // res.end(JSON.stringify({\n    //   message: `Blog Added`\n    // }))\n  });\n  return _handler.apply(this, arguments);\n}\n\n;","map":null,"metadata":{},"sourceType":"module"}